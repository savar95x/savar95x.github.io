<!DOCTYPE html>
<html lang=en>
	<head>
	<title>Search</title>
	<link rel=stylesheet href=/style.css />
	<meta charset=utf-8 />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="savar&#39;s old startpage" />
	<link rel="stylesheet" type="text/css" href="https://unpkg.com/@phosphor-icons/web@2.0.3/src/bold/style.css" />
</head>

<body>
	<section>
<section id=header> 
	<section id=home>
		<a href=/>savar</a>
	</section>
	<section id=stuff>
		<a href=/blog>blog</a>
		<a href=/about>about</a>
		<a href='https://github.com/savar95x?tab=repositories'>projects</a>
	</section>
</section>
<hr>
</section>

<section id=content>
	<section id=search-bar>
	<input id=searchInput placeholder="Search with SearX" autocomplete=off />
</section>
<section id=cards>
	<button aria-label="send search query" onclick="search()" title="Search" class="ph-bold ph-magnifying-glass" id=searchButton></button>
	<button aria-label="cycle through the search engine" onclick="toggleEngine()" title="Toggle Engine" id=toggleButton class="ph-bold ph-arrow-arc-right"></button>
	<button aria-label="clear search input" onclick="clearInput()" title="Clear Input" id=clearButton class="ph-bold ph-backspace"></button>
</section>
<style>
#content {
	width: 40%;
	max-width: 400px;
}

#search-bar {
	display: flex;
	width: 100%;
	margin-bottom: 1em;
}

#searchInput {
	width: 100%;
	font: normal 450 18px "Rubik", sans-serif;
	text-align: center;
	border-style: solid;
	border-width: 0 0 2px 0;
	filter: brightness(40%);
	padding: 0.9em;
	background: transparent;
	color: var(--fg-bright);
}

#searchInput:focus {
	filter: brightness(85%);
}

#cards {
	display: grid;
	margin: 1.5em auto;
	gap: 1em;
	grid-template-columns: repeat(3, 1fr);
	width: 100%;
}

#cards button {
	text-align: center;
	padding: 1.1em 0;
	font-size: 1.1em;
	/*border-radius: 2px;*/
	box-shadow: 2px 2px 1px 1px rgba(0,0,0,0.35);
	color: var(--fg);
	background: var(--bg-alt);
}

#cards button:hover {
	filter: brightness(105%);
}

#cards button:active {
	transform: translate(2px, 2px);
	box-shadow: 0px 0px 1px 1px rgba(0,0,0,0.35);
}

@media screen and (max-width: 10.6in) { #content { width: calc(100% - 8em); } }
@media screen and (max-width: 8.4in) { #content { width: calc(100% - 2em); } }
</style>
<script>
const allEngines = [
	//{ name:"Google", preposition:"with", color:"hsl(355,75%,76%)", url:"google.com/search?q=", urlFilters:"" },
	{ name:"ArchWiki", preposition:"over", color:"#80A9A0", url:"wiki.archlinux.org/index.php?search=", urlFilters:"" },
	{ name:"SearX", preposition:"with", color:"#A9B665", url:"searx.be/search?q=", urlFilters:"" },
	{ name:"YouTube", preposition:"over", color:"#D87873", url:"youtube.com/results?search_query=", urlFilters:"" },
	{ name:"Github", preposition:"over", color:"#D8A657", url:"github.com/search?q=", urlFilters:"&s=stars" },
];

var activeEngine;
var x = -1;

function toggleEngine() {
	x = (x == allEngines.length - 1) ? -1:x; 
	x = x + 1;
	activeEngine = allEngines[x];
	document.getElementById('searchInput').placeholder = "Search " + activeEngine.preposition + " " + activeEngine.name;
	document.getElementById('searchInput').style.borderColor = activeEngine.color;
	document.getElementById('searchInput').focus();
}

function search() {
	let realVal = document.getElementById('searchInput').value.replace("%","%25").replace(/#/g,"%23").replace(/&/g,"%26").replaceAll("+","%2B").replace("/","%2F").replace("?","%3F").replace("=","%3d").replace("_","%5F").replace(/:/g,"%3A");
	let noSpaceVal = realVal.replace(/\s/g, "");
	{ if (noSpaceVal == "") {window.location.reload(false);}
		else {window.open("https://" + activeEngine.url + realVal + activeEngine.urlFilters, "_self");} };
}

function clearInput() {
	document.getElementById("searchInput").value = "";
	document.getElementById('searchInput').focus();
}

toggleEngine();
document.getElementById("searchInput").addEventListener("keydown", event =>
	{ if (event.key == "Enter") search(); // keycode 13
		else if (event.altKey && event.key == "Tab") toggleEngine(); // keycode 9
		else if (event.altKey && event.key == "c") clearInput();
	});
</script>

</section>
	<section>
<hr>
<section id=footer> 
	<section id=phicons>
		<a aria-label="source code" href=https://github.com/savar95x/savar95x.github.io><img src=/svg/code-bold.svg aria-label="source code" alt="code" width=18px height=18px /></a>
		<a aria-label="my github" href=https://github.com/savar95x><img src=/svg/user-bold.svg aria-label="my github" alt="github" width=18px height=18px /></a>
		<a aria-label="mail me" href=mailto:skaar513@gmail.com><img src=/svg/paper-plane-tilt-bold.svg aria-label="mail me" alt="mail" width=18px height=18px /></a>
	</section>
</section>
</section>

</body>
</html>
